<script>
// Функция для обнаружения встроенного браузера Telegram
function isTelegramInAppBrowser() {
  // Для Android
  if (/Android/i.test(navigator.userAgent) && typeof window.TelegramWebview !== 'undefined') {
    return true;
  }
  // Для iOS
  if (/iPhone|iPad|iPod/i.test(navigator.userAgent) && typeof window.TelegramWebviewProxy !== 'undefined') {
    return true;
  }
  return false;
}

if (isTelegramInAppBrowser()) {
  // Показываем сообщение пользователю (рекомендуется, чтобы он понял, что происходит)
  alert("Для правильной работы сайта откройте его в обычном браузере (Chrome/Safari). Сейчас вы будете перенаправлены.");

  // Способ 1: Используем Chrome Intent (работает хорошо на Android)
  const currentUrl = encodeURIComponent(window.location.href);
  const intentUrl = `intent://${window.location.host}${window.location.pathname}${window.location.search}#Intent;scheme=https;package=com.android.chrome;end`;
  
  window.location.href = intentUrl;

  // Способ 2: Альтернатива — универсальный редирект через googlechrome:// или просто сообщение
  // Если первый не сработает, можно добавить fallback:
  setTimeout(() => {
    // Для iOS лучше просто показать инструкцию, т.к. нет надёжного intent
    if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
      alert("Пожалуйста, нажмите на три точки (⋮) в правом верхнем углу и выберите «Открыть в Safari» или скопируйте ссылку и откройте в обычном браузере.");
    } else {
      window.location.href = "googlechrome:" + window.location.href; // Попытка открыть в Chrome
    }
  }, 1000);
}
</script>
